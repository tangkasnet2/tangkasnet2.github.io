var c=function(){var n=!0;return function(t,a){var e=n?function(){if(a){var e=a.apply(t,arguments);return a=null,e}}:function(){};return n=!1,e}}(),d=c(this,function(){var t,e,a,n=function(){};try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}t.console?(t.console.log=n,t.console.warn=n,t.console.debug=n,t.console.info=n,t.console.error=n,t.console.exception=n,t.console.trace=n):t.console=((a={}).log=e=n,a.warn=e,a.debug=e,a.info=e,a.error=e,a.exception=e,a.trace=e,a)});d();var sendInterval,sendCount=0,speed=0;function startGame(){game&&isPlaying||(game||(game={}),game.bet1=0,game.bet2=0,game.bet3=0,game.bet4=0,game.cards=[],game.creditout=player.credit,game.creditin=$("body").attr("data-play-creditin"),game.colok=$("body").attr("data-play-colok")?$("body").attr("data-play-colok"):"1",game.rf=$("body").attr("data-play-rf"),game.fivek=$("body").attr("data-play-fivek"),game.sf=$("body").attr("data-play-sf"),game.fourk=$("body").attr("data-play-fourk"),game.betx=$("body").attr("data-play-betx"),game.betsize=$("body").attr("data-play-betsize"),game.room=$("body").attr("data-play-room"),game.moves=4),currentRoom=game.room;var t=["rf","fivek","sf","fourk","fh","flush","str","threek","twopair","acepair"],a=0;$(".rank").each(function(){var e=$(this).next();$(e).attr("data-prize",depo[t[a]]),$(e).text(depo[t[a]]),a++}),$(".play-room-mob").unbind().click(function(){menuClick("table")}),$.when($(".play-overlay").fadeOut(0)).then(function(){$(".play-overlay").remove(),$(".board.main").click(function(){game.moves&&$(".board.main .card.cover").length?$("#deal-btn").click():$("#transfer-btn").click()}),$(".board.main").contextmenu(function(){game.moves&&$(".board.main .card.cover").length?$("#skip-btn").click():$("#transfer-btn").click()}),$(window).keydown(function(e){if($(".button-overlay").length&&!isWaiting){if($(".sub-menu-overlay").length)return;switch(e.which){case 48:case 78:isWaiting||$("#deal-btn").is(":visible")&&$("#deal-btn").click();break;case 32:case 46:isWaiting||($("#skip-btn").is(":visible")?$("#skip-btn").click():$("#transfer-btn").click());break;case 13:case 77:isWaiting||$("#transfer-btn").is(":visible")&&$("#transfer-btn").click();break;case 187:$(".info-left #credit").click();break;case 189:$(".info-left #credit").contextmenu();break;case 38:$("#colok").click();break;case 40:$("#colok").contextmenu()}}else $(window).click()})}),updateGameData();for(var e=1;e<=4-game.moves;e++)$(".info-left #bet"+e).text(game["bet"+e]);if((0<parseInt(game.creditin)||0<game.cards.length)&&$("#credit .val").removeClass("blink").text(game.creditin),game.cards&&0<game.cards.length){$(".board-image").hide(),$(".board.main").fadeIn(150);var n=0;for(e=0;e<game.cards.length;e++)if(game.cards[e]&&"0"!=game.cards[e]&&"nothing"!=game.cards[e].toLowerCase()){0;var i=getCard(game.cards[e]);a=e+1;$(".board.main .card:nth-child("+a+")").removeClass("cover hidden").addClass(i),5!=e&&6!=e||(n=e)}else(1==e&&game.cards[2]&&"0"!=game.cards[2]||3==e&&game.cards[4]&&"0"!=game.cards[4])&&$(".board.main .card:nth-child("+(e+1)+")").removeClass("hidden");0<n&&drawCateg(n),game.win&&"0"!=game.win&&parseInt(game.win)<5&&(game.special&&"2"!=game.special?"4"==game.special?drawCateg(5):"1"==game.special&&drawCateg(6):drawCateg(0))}game.win&&"0"!=game.win?($(".board.main").fadeIn(150),$(".play-buttons .button-overlay").show(),winState(game.cardidx,game.win)):$(".board.main .card.cover").length||(isWaiting=!0,$(".play-buttons .button-overlay").show(),setTimeout(function(){resetGame()},3e3)),$("#credit, .play-content img, .play-buttons .button").unbind();var r=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];$("#colok span").text(r[game.colok-1]),$("#colok").click(function(){var e=r.indexOf($("#colok span").text().trim());e==r.length-1?e=0:e++,0==game.bet1&&($("#colok span").text(r[e]),game.colok=e+1)}),$("#colok").contextmenu(function(e){e.preventDefault();var t=r.indexOf($("#colok span").text().trim());0==t?t=r.length-1:t--,0==game.bet1&&($("#colok span").text(r[t]),game.colok=t+1)}),$("#credit").click(function(){sendData("v:"),$("#credit .val").removeClass("blink")}),$("#credit").contextmenu(function(e){if(e.preventDefault(),"INSERT"!=$("#credit .val").text().trim()&&0==game.bet1){var t="w:";t+=50<=game.betsize?50:game.betsize,sendData(t)}}),$(".play-content img").click(function(){game.moves?$("#deal-btn").click():$("#transfer-btn").click()}),$(".play-buttons .button").click(function(){if(soundPlay("click"),!isWaiting){sendCount=0,sendInterval&&clearInterval(sendInterval),$(".play-buttons .button-overlay").show(),isWaiting=!0;var e=$(this).attr("id");if("transfer-btn"==e)transfer();else if("deal-btn"==e){if(game.win&&0<parseInt(game.win))return void transfer();if("INSERT COIN"==$("#credit .val").text().trim())swal("Perhatian","Masukkan COIN Terlebih Dahulu!"),$(".play-buttons .button-overlay").hide(),isWaiting=!1;else if("0"==$("#credit .val").text().trim())swal("Perhatian","COIN Atas Tidak Mencukupi!"),$(".play-buttons .button-overlay").hide(),isWaiting=!1;else{$(".board-image").is(":visible")&&($(".board-image").hide(),$(".board.main").fadeIn(150));var t=5-game.moves,a="d:"+t;4==game.moves&&(a="n:"+game.colok),2==game.moves?drawCateg(5):1==game.moves&&drawCateg(6);var n,i,r=parseInt($("#credit .val").text().trim())*divider;1==t?(n=game.betsize,i=r-game.betsize):i=r-(n=game["bet"+(t-1)]*divider),i<0&&(i=0,n=r),$("#credit .val").text(parseInt(i)/divider),game.creditin=i,50<parseInt(n)?$("#bet"+(5-game.moves)).text(parseInt(n)/divider):$("#bet"+(5-game.moves)).text(parseInt(n)),sendData(a)}}else if("skip-btn"==e){if(game.win&&0<parseInt(game.win))return void transfer();if(4==game.moves)swal("Perhatian","Belum Ada Kartu Yang Terbuka!"),$(".play-buttons .button-overlay").hide(),isWaiting=!1;else{$("body").attr("data-skip","1");a="e:"+(5-game.moves);sendData(a)}}}}),isPlaying=!0}function transfer(){var e=parseInt($(".info-right .rank.blink").next().text().trim()),t=parseInt($("#credit .val").text().trim()),a=game.fcreditin;game.creditin=a,$("#credit .val").prop("number",t).animateNumber({number:a},3e3),$(".info-right .rank.blink").next().prop("number",e).animateNumber({number:0},3e3);var n=setTimeout(function(){$(".info-right .rank.blink").next().text(e/divider),resetGame()},3e3);if(setTimeout(function(){$(window).off("click").on("click",function(){clearTimeout(n),$("#credit .val").stop().text(a),$(".info-right .rank.blink").next().stop().text(0),setTimeout(function(){$(".info-right .rank.blink").next().text(e/divider),resetGame()},150),$(window).off("click")})},500),game.betting){var i="g:"+player.username+";"+game.room+";x";sendData(i),sendInterval=setInterval(function(){isWaiting?3<sendCount?(clearInterval(sendInterval),swal("Perhatian","Koneksi Bermasalah, Halaman Akan Dimuat Ulang.").then(function(){location.reload()})):(sendCount++,sendData(i)):clearInterval(sendInterval)},3e3)}}function flipCard(e,t,a,n,i){switch($(".board.main .card").html(""),sendCount=0,sendInterval&&clearInterval(sendInterval),speed=JSON.parse(localStorage.settings),speed=parseInt(speed.speed),console.log("FLIPPING "+game.moves),game.moves){case 4:$.when($(".board.main .card:nth-child(1)").fadeOut(0)).then(function(){$(".board.main .card:nth-child(1)").removeClass("cover hidden").addClass(e[0]).fadeIn(0),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(2)").removeClass("hidden"),setTimeout(function(){$(".board.main .card:nth-child(3)").removeClass("cover hidden").addClass(e[1]),soundPlay("flip"),setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1},speed)},speed)},speed)});break;case 3:i?setTimeout(function(){$(".board.main .card:nth-child(2)").removeClass("cover hidden").addClass(e[0]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(4)").removeClass("cover hidden").addClass(e[1]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(5)").removeClass("cover hidden").addClass(e[2]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(6)").removeClass("cover hidden").addClass(e[3]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(7)").removeClass("cover hidden").addClass(e[4]),soundPlay("flip"),"0"!=a?winState(t,a):setTimeout(function(){resetGame()},1e3)},speed)},speed)},speed)},speed)},speed):($(".board.main .card:nth-child(4)").removeClass("hidden"),setTimeout(function(){$(".board.main .card:nth-child(5)").removeClass("cover hidden").addClass(e),soundPlay("flip"),setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1},speed)},speed));break;case 2:i?setTimeout(function(){$(".board.main .card:nth-child(2)").removeClass("cover hidden").addClass(e[0]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(4)").removeClass("cover hidden").addClass(e[1]),$("#flipAudio")[0].play,setTimeout(function(){$(".board.main .card:nth-child(6)").removeClass("cover hidden").addClass(e[2]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(7)").removeClass("cover hidden").addClass(e[3]),soundPlay("flip"),$(".play-header").animate({scrollTop:$(".play-header")[0].scrollHeight}),"0"!=a?winState(t,a):setTimeout(function(){resetGame()},1e3)},speed)},speed)},speed)},speed):($(".board.main .card:nth-child(6)").removeClass("cover hidden").addClass(e),soundPlay("flip"),setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1},speed));break;case 1:$(".board.main .card:nth-child(2)").removeClass("cover hidden").addClass(e[0]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(4)").removeClass("cover hidden").addClass(e[1]),soundPlay("flip"),setTimeout(function(){$(".board.main .card:nth-child(7)").removeClass("cover hidden").addClass(e[2]),soundPlay("flip"),$("body").removeAttr("data-skip"),"0"!=a?winState(t,a):setTimeout(function(){resetGame()},1e3)},speed)},speed)}game.moves=game.moves-1}function winState(e,t){""!=e[0]&&$(".board.main .card:nth-child("+e[0]+")").html("<div class='card-disabled'></div>"),e[1]&&""!=e[1]&&$(".board.main .card:nth-child("+e[1]+")").html("<div class='card-disabled'></div>"),$(".info-right tr:nth-child("+t+") .rank").addClass("blink"),t=parseInt(t),game.win=t,udahBet&&(game.creditwon=game.creditwon/divider),t<5&&$(".info-right tr:nth-child("+t+") .rank").next().text(game.creditwon);var a=parseInt($(".info-right tr:nth-child("+t+") .rank").next().text().trim())/divider,n=0,i=0,r=parseInt($(".info-left #credit .val").text().trim());if("0"!=game.bet4?drawCateg(6):"0"!=game.bet3?drawCateg(5):drawCateg(0),t<5){if(isWaiting=!0,n=parseInt($(".info-left .section:nth-child("+(t+4)+") div:first-child").text().trim()),"0"==game.special||"2"==game.special){if(game.creditin!=game.fcreditin&&4==t){var o=parseInt($(".info-right tr:nth-child("+t+") .rank").next().text());r+=parseInt(game.fcreditin)-(o+parseInt(game.creditin)+parseInt(game.topbonus)+n),$(".info-right tr:nth-child("+t+") .rank").next().text(o)}$(".rank-categ").text(""),$(".info-right tr:nth-child("+t+") .rank, .info-right tr:nth-child("+t+") .rank ~ td").removeClass("red-color green-color")}else if("4"==game.special){if(drawCateg(5,t),game.creditin!=game.fcreditin&&4==t){o=parseInt($(".info-right tr:nth-child("+t+") .rank").next().text());o*=1.5,r+=parseInt(game.fcreditin)-(o+parseInt(game.creditin)+parseInt(game.topbonus)+n),$(".info-right tr:nth-child("+t+") .rank").next().text(o)}$(".info-right tr:nth-child("+t+") .rank, .info-right tr:nth-child("+t+") .rank ~ td").removeClass("red-color").addClass("green-color")}else if("1"==game.special){if(drawCateg(6,t),game.creditin!=game.fcreditin&&4==t){o=parseInt($(".info-right tr:nth-child("+t+") .rank").next().text());o*=2,r+=parseInt(game.fcreditin)-(o+parseInt(game.creditin)+parseInt(game.topbonus)+n),$(".info-right tr:nth-child("+t+") .rank").next().text(o)}$(".info-right tr:nth-child("+t+") .rank, .info-right tr:nth-child("+t+") .rank ~ td").removeClass("green-color").addClass("red-color")}i=n+r,$(".info-left #credit .val").prop("number",r).animateNumber({number:i},100*n),$(".info-left .section:nth-child("+(t+4)+") div:first-child").prop("number",n).animateNumber({number:0},100*n),0<parseInt(game.topbonus)&&$("#topbonus").text(game.topbonus),0<parseInt(game.topbonus)?setTimeout(function(){$(".info-left #credit .val").prop("number",i),i+=parseInt(game.topbonus),setTimeout(function(){$(".info-left #credit .val").animateNumber({number:i},10*parseInt(game.topbonus)),$("#topbonus").prop("number",parseInt(game.topbonus)).animateNumber({number:0},10*parseInt(game.topbonus)),setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1,1e5<a&&$("#transfer-btn").click()},10*parseInt(game.topbonus))},1e3)},100*n):setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1,1e5<a&&$("#transfer-btn").click()},100*n)}else parseInt(game.gotcolok)?(0==i&&(i=r),i+=parseInt($("#tbet").text().trim()),$(".info-left #credit .val").text("").animateNumber({number:i},1e4),$("#tbet").prop("number",parseInt($("#tbet").text())).animateNumber({number:0},1e4),setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1,1e5<a&&$("#transfer-btn").click()},1e4)):setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1,1e5<a&&$("#transfer-btn").click()},speed)}function drawCateg(e,t){if($(".rank-categ").text(""),0==e){$(".info-right td").each(function(){$(this).removeClass("green-color red-color"),$(this).attr("data-color")&&$(this).addClass("yellow-color")})}else{if(5==e){e=["M","U","R","N","I","X","2"];var a="red-color"}else if(6==e){e=["M","U","R","N","I","X","2"];a="red-color"}var n=0;$(".rank-categ").each(function(){n<e.length&&($(this).removeClass("red-color green-color").addClass(a).text(e[n]),t||n<4&&($(this).next().removeClass("red-color yellow-color green-color").addClass(a),$(this).next().next().removeClass("red-color yellow-color green-color").addClass(a)),n++)})}}function updateGameData(){$("#playroom").text(game.room),$("#playuname").text(player.username.toUpperCase()),$(".play-room,.play-room-mob").html("<i class='fa fa-gamepad'></i> "+game.room),$("#play div:last-child").hide(),$(".play-room").show(),$(".play-footer #username").text(player.username),game.betting&&$(".play-header #credit .val").animateNumber({number:game.creditin}),$(".play-footer #credit").text(game.creditout),$(".info-left #rf").text(game.rf),$(".info-left #fivek").text(game.fivek),$(".info-left #sf").text(game.sf),$(".info-left #fourk").text(game.fourk),$(".info-left #betx").text(game.betx);var a=parseInt(game.bet1)+parseInt(game.bet2)+parseInt(game.bet3)+parseInt(game.bet4);$(".info-left #tbet").text(10*a),game.moves<4&&0<game["bet"+(4-game.moves)]&&$(".rank").each(function(){var e=$(this).next(),t=parseInt($(e).attr("data-prize"))*a;$(e).text(t)})}function resetGame(){game.win="",game.cardidx="",game.cards=[],game.bet1=0,game.bet2=0,game.bet3=0,game.bet4=0,game.betting=0,game.moves=4,console.log("reset game"),$("#tbet,.bet-amount").text("0"),$(".info-right .rank").removeClass("blink"),$(".board .card").each(function(){$(this).attr("class","card cover hidden")}),$.when($(".board").hide()).then(function(){$(".board-image").fadeIn(150)}),$.when($(".play-buttons .button").hide()).then(function(){$.when($(".play-buttons .button.play").show()).then(function(){setTimeout(function(){$(".play-buttons .button-overlay").hide(),isWaiting=!1},150)})}),$(".rank").each(function(){var e=$(this).next(),t=$(e).attr("data-prize");$(e).text(t)}),0<parseInt(game.creditin)?$(".info-left #credit .val").removeClass("blink").text(game.creditin):$(".info-left #credit .val").text("0"),$(".rank-categ, #topbonus, .card").text(""),$(".info-right td").each(function(){$(this).removeClass("green-color red-color"),$(this).attr("data-color")&&$(this).addClass("yellow-color")}),$("body").attr("data-full","0")}$("document").ready(function(){if(isPlaying)startGame();else if($("body").attr("data-play-room")){var e="b:"+$("body").attr("data-play-room")+";"+player.username;sendData(e)}$(".play-overlay").click(function(){swal("Perhatian","Harap Pilih Meja Dahulu Sebelum Bermain!"),homeMenuClick("table")})});
